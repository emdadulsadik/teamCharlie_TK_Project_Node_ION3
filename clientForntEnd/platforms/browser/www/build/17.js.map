{"version":3,"sources":["../../src/pages/activity-records/activity-records.module.ts","../../src/pages/activity-records/activity-records.ts"],"names":[],"mappings":"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","file":"17.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ActivityRecordsPage } from './activity-records';\n\n@NgModule({\n  declarations: [\n    ActivityRecordsPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ActivityRecordsPage),\n  ],\n})\nexport class ActivityRecordsPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/activity-records/activity-records.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { TabsPage } from '../tabs/tabs';\nimport { UsertabsPage } from '../usertabs/usertabs';\nimport { Storage } from '@ionic/storage';\n\nimport { SetActivity } from \"../../models/setActivites\";\nimport { Geolocation } from '@ionic-native/geolocation';\nimport { ActivityRecordsProvider } from '../../providers/activity-records/activity-records';\n\n\n\n\n\n/**\n * \n * \n * @export\n * @class ActivityRecordsPage\n */\n@IonicPage()\n@Component({\n  selector: 'page-activity-records',\n  templateUrl: 'activity-records.html',\n})\nexport class ActivityRecordsPage {\n\n  /**\n   * \n   * \n   * @type {string}\n   * @memberOf ActivityRecordsPage\n   */\n  activity:string;\n  walkingData:SetActivity [] = [];\n  cyclingData:SetActivity [] = [];\n  drivingData:SetActivity [] = [];\n\n    /**\n     * Creates an instance of ActivityRecordsPage.\n     * @param {NavController} navCtrl \n     * @param {NavParams} navParams \n     * @param {Storage} storage \n     * @param {Geolocation} geolocation \n     * @param {ActivityRecordsProvider} ActivityRecordsProvider \n     * \n     * @memberOf ActivityRecordsPage\n     */\n    constructor(\n      public navCtrl: NavController,\n      public navParams: NavParams,\n      public storage: Storage,\n      public geolocation: Geolocation,\n      public ActivityRecordsProvider : ActivityRecordsProvider\n    ){}\n\n\n    /**\n     * \n     * \n     * \n     * @memberOf ActivityRecordsPage\n     */\n    ionViewDidLoad() { \n      console.log('ionViewDidLoad ActivityRecordsPage');\n      // this.getActivityRecordsData();\n      this.getDrivingRecordsData();\n      this.getWalkingRecordsData();\n      this.getCyclingRecordsData();\n     \n\n    }\n\n   /**\n   * @description- Get the token value form sqlLite Storage\n   * @author-Emdadul Sadik\n   * @type {Promise<any>}\n   * @memberOf ActivityRecords\n   */\n\n  token:Promise<any> = this.storage.get('token').then((val)=>{\n    return this.token = val;\n  }).catch( err => console.log(err) );\n\n\n  /**\n  * @description- Change the Footbar to default if token is null\n  * @author-Emdadul Sadik\n  * @memberOf ActivityRecords\n  */\n  goToRootAgain(){\n    this.storage.get('token').then((val)=>{\n      if(val==null){\n        this.navCtrl.setRoot(TabsPage); \n      }else{\n        this.navCtrl.setRoot(UsertabsPage); \n      }\n    })\n  }\n\n  /**\n  * @description- Change the Footbar to default if token is null\n  * @author-Emdadul Sadik\n  * @memberOf ActivityRecords\n  */\n getWalkingRecordsData(){\n    this.storage.get('userId').then((userId) => {\n      this.ActivityRecordsProvider.getWalkingRecords(userId).subscribe(\n        data => { \n          for( let item of data){\n\n            item.distance = this.getDistanceFromLatLonInKm(\n              item.location.start.lat,\n              item.location.start.lng,\n              item.location.end.lat,\n              item.location.end.lng );\n\n            item.timedelta = new Date(item.end).valueOf() - new Date(item.start).valueOf();\n\n            item.timedelta = this.TimeforHumans( item.timedelta / 1000 );\n\n            this.walkingData.push(item);\n\n          }; \n        },\n        error=> console.log('ActivityRecords Fetching Error', error)\n      );\n    }).catch( err => console.log(err) );\n\n  }\n\n  /**\n   * \n   * \n   * \n   * @memberOf ActivityRecordsPage\n   */\n  getCyclingRecordsData(){\n    this.storage.get('userId').then((userId) => {\n      this.ActivityRecordsProvider.getCyclingRecords(userId).subscribe(\n        data => { \n          for( let item of data){\n\n            item.distance = this.getDistanceFromLatLonInKm(\n              item.location.start.lat,\n              item.location.start.lng,\n              item.location.end.lat,\n              item.location.end.lng );\n\n            item.timedelta = new Date(item.end).valueOf() - new Date(item.start).valueOf();\n\n            item.timedelta = this.TimeforHumans( item.timedelta / 1000 );\n\n            this.cyclingData.push(item);\n\n          }; \n        },\n        error=> console.log('ActivityRecords Fetching Error', error)\n      );\n    }).catch( err => console.log(err) );\n  }\n\n  /**\n   * \n   * \n   * \n   * @memberOf ActivityRecordsPage\n   */\n  getDrivingRecordsData(){\n    this.storage.get('userId').then((userId) => {\n      this.ActivityRecordsProvider.getDrivingRecords(userId).subscribe(\n        data => { \n          for( let item of data){\n\n            item.distance = this.getDistanceFromLatLonInKm(\n              item.location.start.lat,\n              item.location.start.lng,\n              item.location.end.lat,\n              item.location.end.lng );\n\n            item.timedelta = new Date(item.end).valueOf() - new Date(item.start).valueOf();\n\n            item.timedelta = this.TimeforHumans( item.timedelta / 1000 );\n\n            this.drivingData.push(item);\n\n          }; \n        },\n        error=> console.log('ActivityRecords Fetching Error', error)\n      );\n    }).catch( err => console.log(err) );\n  }\n\n  /**\n  * @description- Change the Footbar to default if token is null\n  * @author-Emdadul Sadik\n  * @memberOf ActivityRecords\n  */\n  getDistanceFromLatLonInKm(lat1,lon1,lat2,lon2) {\n      var R = 6371; // Radius of the earth in km\n      var dLat = this.deg2rad(lat2-lat1);  // deg2rad below\n      var dLon = this.deg2rad(lon2-lon1); \n      var a = \n          Math.sin(dLat/2) * Math.sin(dLat/2) +\n          Math.cos( this.deg2rad(lat1)) * Math.cos( this.deg2rad(lat2) ) * \n          Math.sin(dLon/2) * Math.sin(dLon/2)\n          ; \n      var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); \n      var d = R * c; // Distance in km\n      return d;\n  }\n  /**\n  * @description- Change the Footbar to default if token is null\n  * @author-Emdadul Sadik\n  * @memberOf ActivityRecords\n  */\n  deg2rad(deg) {\n      return deg * (Math.PI/180)\n  }\n\n\n  /**\n  * @description- Change the Footbar to default if token is null\n  * @author-Emdadul Sadik\n  * @memberOf ActivityRecords\n  */\n  TimeforHumans ( seconds ) {\n      var levels = [\n          [Math.floor(seconds / 31536000), 'years'],\n          [Math.floor((seconds % 31536000) / 86400), 'days'],\n          [Math.floor(((seconds % 31536000) % 86400) / 3600), 'hours'],\n          [Math.floor((((seconds % 31536000) % 86400) % 3600) / 60), 'minutes'],\n          [(((seconds % 31536000) % 86400) % 3600) % 60, 'seconds'],\n      ];\n      var returntext = '';\n\n      for (var i = 0, max = levels.length; i < max; i++) {\n          if ( levels[i][0] === 0 ) continue;\n          returntext += ' ' + levels[i][0] + ' ' + (levels[i][0] === 1 ? \n            levels[i][1].toString().substr( 0 , ( levels[i][1]).toString().length - 1 ) : levels[i][1]);\n      };\n      return returntext.trim();\n  }\n\n\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/activity-records/activity-records.ts"],"sourceRoot":""}